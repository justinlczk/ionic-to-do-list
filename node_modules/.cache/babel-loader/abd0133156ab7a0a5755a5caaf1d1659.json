{"ast":null,"code":"import { useStorage } from '@capacitor-community/react-hooks/storage';\nimport { useEffect, useState } from 'react';\nexport function useToDoList() {\n  const {\n    get,\n    set,\n    remove\n  } = useStorage();\n  let listStocked = [];\n  console.log('listSotcked après appel de la fonction : ', listStocked);\n  let [listItems, updateList] = useState(listStocked); //Pour initialiser la liste stockées en local\n\n  function getStockedList() {\n    get('listTodo').then(listJson => {\n      if (listJson != null) {\n        listStocked = JSON.parse(listJson);\n        console.log(listStocked);\n        updateList(listStocked);\n      }\n    });\n  }\n\n  useEffect(() => {\n    getStockedList();\n  }, []);\n\n  function addItem(text) {\n    li;\n    const newItem = {\n      id: Math.random(),\n      text: text,\n      checked: false\n    };\n    const newTable = listItems.concat([newItem]);\n    set('listTodo', JSON.stringify(newTable));\n    updateList(newTable);\n  }\n\n  function toggleItem(id) {\n    const updatedList = listItems.map(item => {\n      if (item.id === id) {\n        item.checked = !item.checked;\n      }\n\n      return item;\n    });\n    set('listTodo', JSON.stringify(updatedList));\n    updateList(updatedList);\n  }\n\n  return {\n    listItems,\n    addItem,\n    toggleItem\n  };\n}","map":{"version":3,"sources":["/Users/justinluczak/Documents/COURS CNAM 2EME ANNEE/webmobile/github/luczak-justin_todo-list/src/hooks/useToDoList.ts"],"names":["useStorage","useEffect","useState","useToDoList","get","set","remove","listStocked","console","log","listItems","updateList","getStockedList","then","listJson","JSON","parse","addItem","text","li","newItem","id","Math","random","checked","newTable","concat","stringify","toggleItem","updatedList","map","item"],"mappings":"AAAA,SAASA,UAAT,QAA2B,0CAA3B;AAEA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAIA,OAAO,SAASC,WAAT,GAAuB;AAE1B,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA;AAAZ,MAAuBN,UAAU,EAAvC;AAEA,MAAIO,WAAW,GAAG,EAAlB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ,EAAyDF,WAAzD;AAEA,MAAI,CAACG,SAAD,EAAYC,UAAZ,IAA0BT,QAAQ,CAACK,WAAD,CAAtC,CAR0B,CAU1B;;AACA,WAASK,cAAT,GAA0B;AACtBR,IAAAA,GAAG,CAAC,UAAD,CAAH,CAAgBS,IAAhB,CAAsBC,QAAD,IAAc;AAC/B,UAAIA,QAAQ,IAAI,IAAhB,EAAsB;AAClBP,QAAAA,WAAW,GAAGQ,IAAI,CAACC,KAAL,CAAWF,QAAX,CAAd;AACAN,QAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;AAEAI,QAAAA,UAAU,CAACJ,WAAD,CAAV;AACH;AACJ,KAPD;AAQH;;AAEDN,EAAAA,SAAS,CAAE,MAAM;AACbW,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT;;AAMA,WAASK,OAAT,CAAiBC,IAAjB,EAAuB;AAEnBC,IAAAA,EAAE;AAEF,UAAMC,OAAO,GAAG;AACZC,MAAAA,EAAE,EAAEC,IAAI,CAACC,MAAL,EADQ;AAEZL,MAAAA,IAAI,EAAEA,IAFM;AAGZM,MAAAA,OAAO,EAAE;AAHG,KAAhB;AAMA,UAAMC,QAAQ,GAAGf,SAAS,CAACgB,MAAV,CAAiB,CAACN,OAAD,CAAjB,CAAjB;AAEAf,IAAAA,GAAG,CAAC,UAAD,EAAaU,IAAI,CAACY,SAAL,CAAeF,QAAf,CAAb,CAAH;AACAd,IAAAA,UAAU,CAACc,QAAD,CAAV;AACH;;AAED,WAASG,UAAT,CAAoBP,EAApB,EAAwB;AACpB,UAAMQ,WAAW,GAAGnB,SAAS,CAACoB,GAAV,CAAcC,IAAI,IAAI;AACtC,UAAIA,IAAI,CAACV,EAAL,KAAYA,EAAhB,EAAoB;AAChBU,QAAAA,IAAI,CAACP,OAAL,GAAe,CAACO,IAAI,CAACP,OAArB;AACH;;AACD,aAAOO,IAAP;AACH,KALmB,CAApB;AAOA1B,IAAAA,GAAG,CAAC,UAAD,EAAaU,IAAI,CAACY,SAAL,CAAeE,WAAf,CAAb,CAAH;AACAlB,IAAAA,UAAU,CAACkB,WAAD,CAAV;AACH;;AAGD,SAAO;AACHnB,IAAAA,SADG;AACQO,IAAAA,OADR;AACiBW,IAAAA;AADjB,GAAP;AAIH","sourcesContent":["import { useStorage } from '@capacitor-community/react-hooks/storage';\nimport { verify } from 'crypto';\nimport { useEffect, useState } from 'react';\n\n\n\nexport function useToDoList() {\n\n    const { get, set, remove } = useStorage();\n\n    let listStocked = [];\n\n    console.log('listSotcked après appel de la fonction : ', listStocked)\n\n    let [listItems, updateList] = useState(listStocked);\n\n    //Pour initialiser la liste stockées en local\n    function getStockedList() {\n        get('listTodo').then((listJson) => {\n            if (listJson != null) {\n                listStocked = JSON.parse(listJson);\n                console.log(listStocked);\n\n                updateList(listStocked)\n            }\n        })\n    }\n\n    useEffect( () => {\n        getStockedList()\n    }, [] )\n\n\n\n    function addItem(text) {\n\n        li\n\n        const newItem = {\n            id: Math.random(),\n            text: text,\n            checked: false\n        }\n\n        const newTable = listItems.concat([newItem])\n\n        set('listTodo', JSON.stringify(newTable))\n        updateList(newTable)\n    }\n\n    function toggleItem(id) {\n        const updatedList = listItems.map(item => {\n            if (item.id === id) {\n                item.checked = !item.checked\n            }\n            return item\n        })\n\n        set('listTodo', JSON.stringify(updatedList))\n        updateList(updatedList)\n    }\n\n\n    return {\n        listItems, addItem, toggleItem\n    }\n\n}"]},"metadata":{},"sourceType":"module"}