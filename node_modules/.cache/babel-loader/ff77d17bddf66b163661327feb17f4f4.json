{"ast":null,"code":"import { useStorage } from '@capacitor-community/react-hooks/storage';\nimport { useEffect, useState } from 'react';\nexport function useToDoList() {\n  // import des fonctions de stockage local\n  const {\n    get,\n    set,\n    remove\n  } = useStorage(); // déclaration de la liste d'items\n\n  let listStocked = [];\n  let [listItems, updateList] = useState(listStocked); // compteur tâches à faire\n\n  let [counterTodo, setCounterTodo] = useState(0); // fonction pour initialiser le compteur d'items non cochés et synchroniser les données stockées en local\n\n  function getCounterTodo() {\n    get('counterTodo').then(number => {\n      setCounterTodo(parseInt(number));\n    });\n  } // hook pour utiliser la fonction une seule fois lors de l'affichage de la page\n\n\n  useEffect(() => {\n    getCounterTodo();\n  }, []); // fonction pour ajouter 1 au compteur\n\n  function addCounterTodo() {\n    let count = counterTodo;\n    count = count + 1;\n    setCounterTodo(count);\n    set('counterTodo', JSON.stringify(count));\n  } // fonction pour enelever 1 au compteur\n\n\n  function removeCounterTodo() {\n    let count = counterTodo;\n    count = count - 1;\n    setCounterTodo(count);\n    set('counterTodo', JSON.stringify(count));\n  } // fonction pour initialiser la liste stockées en local\n\n\n  function getStockedList() {\n    get('listTodo').then(listJson => {\n      if (listJson != null) {\n        listStocked = JSON.parse(listJson);\n        updateList(listStocked);\n      }\n    });\n  } // appeler la fonction une seule fois pour initialiser les items stockés en local\n\n\n  useEffect(() => {\n    getStockedList();\n  }, []); // fonction pour ajouter des items à la liste\n\n  function addItem(text) {\n    // on prépare l'id pour le nouvel objet en prenant le dernier id du tableau actuel et on retire 1 pour débuter à la bonne valeur \n    let lengthList = listItems.length - 1;\n    const newItem = {\n      id: lengthList + 1,\n      text: text,\n      checked: false\n    }; // on stocke le nouveau tableau avec le nouvel item dans une variable pour l'utiliser dans la fonction update après\n\n    const newTable = listItems.concat([newItem]); // on ajoute 1 au compteur lors de la création d'une tâche\n\n    addCounterTodo(); // on ajoute le nouveau tableau au sotckage en local\n\n    set('listTodo', JSON.stringify(newTable)); // on update la liste en mémoire\n\n    updateList(newTable);\n  } // fonction pour retirer manuellement une tâche\n\n\n  function removeItem(id) {\n    // on copie la liste afin de pouvoir la manipuler\n    let newList = listItems; // on vérifie si l'item est coché ou non\n\n    if (newList[id].checked === false) {\n      // on enlève 1 au compteur\n      removeCounterTodo();\n    } // on supprime l'item voulu dans la nouvelle liste\n\n\n    delete newList[id]; // on ajoute les nouvelles valeurs dans le tableau stocké en local\n\n    set('listTodo', JSON.stringify(newList)); // on update les nouvelles valeurs en mémoire\n\n    updateList(newList);\n  } // fonction pour modifier le contenu d'un ite\n\n\n  function modifieItem(id, text) {\n    let newList = listItems;\n    newList[id].text = text; // on ajoute les nouvelles valeurs dans le tableau stocké en local\n\n    set('listTodo', JSON.stringify(newList)); // on update les nouvelles valeurs en mémoire\n\n    updateList(newList);\n  }\n\n  function toggleItem(id) {\n    const updatedList = listItems.map(item => {\n      if (item.id === id) {\n        item.checked = !item.checked;\n      }\n\n      return item;\n    }); // on ajoute les nouvelles valeurs dans le tableau stocké en local\n\n    set('listTodo', JSON.stringify(updatedList)); // on update les nouvelles valeurs en mémoire\n\n    updateList(updatedList);\n  } // fonction pour retirer tous les items de la liste\n\n\n  function removeAllItems() {\n    // on enlève la liste stockée en local\n    remove('listTodo'); // on vide la liste stockée en mémoire\n\n    updateList([]);\n    set('counterTodo', JSON.stringify(0));\n    setCounterTodo(0);\n  }\n\n  return {\n    listItems,\n    addItem,\n    toggleItem,\n    removeAllItems,\n    counterTodo,\n    setCounterTodo,\n    removeCounterTodo,\n    addCounterTodo,\n    removeItem,\n    modifieItem\n  };\n}","map":{"version":3,"sources":["/Users/justinluczak/Documents/COURS CNAM 2EME ANNEE/webmobile/github/luczak-justin_todo-list/src/hooks/useToDoList.ts"],"names":["useStorage","useEffect","useState","useToDoList","get","set","remove","listStocked","listItems","updateList","counterTodo","setCounterTodo","getCounterTodo","then","number","parseInt","addCounterTodo","count","JSON","stringify","removeCounterTodo","getStockedList","listJson","parse","addItem","text","lengthList","length","newItem","id","checked","newTable","concat","removeItem","newList","modifieItem","toggleItem","updatedList","map","item","removeAllItems"],"mappings":"AAAA,SAASA,UAAT,QAA2B,0CAA3B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAIA,OAAO,SAASC,WAAT,GAAuB;AAE1B;AACA,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA;AAAZ,MAAuBN,UAAU,EAAvC,CAH0B,CAK1B;;AACA,MAAIO,WAAW,GAAG,EAAlB;AACA,MAAI,CAACC,SAAD,EAAYC,UAAZ,IAA0BP,QAAQ,CAACK,WAAD,CAAtC,CAP0B,CAS1B;;AACA,MAAI,CAACG,WAAD,EAAcC,cAAd,IAAgCT,QAAQ,CAAC,CAAD,CAA5C,CAV0B,CAY1B;;AACA,WAASU,cAAT,GAA0B;AACtBR,IAAAA,GAAG,CAAC,aAAD,CAAH,CAAmBS,IAAnB,CAAyBC,MAAD,IAAY;AAChCH,MAAAA,cAAc,CAACI,QAAQ,CAACD,MAAD,CAAT,CAAd;AACH,KAFD;AAGH,GAjByB,CAmB1B;;;AACAb,EAAAA,SAAS,CAAC,MAAM;AACZW,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT,CApB0B,CAwB1B;;AACA,WAASI,cAAT,GAA0B;AACtB,QAAIC,KAAK,GAAGP,WAAZ;AACAO,IAAAA,KAAK,GAAGA,KAAK,GAAG,CAAhB;AACAN,IAAAA,cAAc,CAACM,KAAD,CAAd;AACAZ,IAAAA,GAAG,CAAC,aAAD,EAAgBa,IAAI,CAACC,SAAL,CAAeF,KAAf,CAAhB,CAAH;AACH,GA9ByB,CAgC1B;;;AACA,WAASG,iBAAT,GAA6B;AACzB,QAAIH,KAAK,GAAGP,WAAZ;AACAO,IAAAA,KAAK,GAAGA,KAAK,GAAG,CAAhB;AACAN,IAAAA,cAAc,CAACM,KAAD,CAAd;AACAZ,IAAAA,GAAG,CAAC,aAAD,EAAgBa,IAAI,CAACC,SAAL,CAAeF,KAAf,CAAhB,CAAH;AACH,GAtCyB,CAwC1B;;;AACA,WAASI,cAAT,GAA0B;AACtBjB,IAAAA,GAAG,CAAC,UAAD,CAAH,CAAgBS,IAAhB,CAAsBS,QAAD,IAAc;AAC/B,UAAIA,QAAQ,IAAI,IAAhB,EAAsB;AAClBf,QAAAA,WAAW,GAAGW,IAAI,CAACK,KAAL,CAAWD,QAAX,CAAd;AAEAb,QAAAA,UAAU,CAACF,WAAD,CAAV;AACH;AACJ,KAND;AAOH,GAjDyB,CAmD1B;;;AACAN,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT,CApD0B,CAwD1B;;AACA,WAASG,OAAT,CAAiBC,IAAjB,EAAuB;AAEnB;AACA,QAAIC,UAAU,GAAGlB,SAAS,CAACmB,MAAV,GAAmB,CAApC;AAEA,UAAMC,OAAO,GAAG;AACZC,MAAAA,EAAE,EAAEH,UAAU,GAAG,CADL;AAEZD,MAAAA,IAAI,EAAEA,IAFM;AAGZK,MAAAA,OAAO,EAAE;AAHG,KAAhB,CALmB,CAWnB;;AACA,UAAMC,QAAQ,GAAGvB,SAAS,CAACwB,MAAV,CAAiB,CAACJ,OAAD,CAAjB,CAAjB,CAZmB,CAcnB;;AACAZ,IAAAA,cAAc,GAfK,CAiBnB;;AACAX,IAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAeY,QAAf,CAAb,CAAH,CAlBmB,CAoBnB;;AACAtB,IAAAA,UAAU,CAACsB,QAAD,CAAV;AACH,GA/EyB,CAiF1B;;;AACA,WAASE,UAAT,CAAoBJ,EAApB,EAAwB;AACpB;AACA,QAAIK,OAAO,GAAG1B,SAAd,CAFoB,CAIpB;;AACA,QAAI0B,OAAO,CAACL,EAAD,CAAP,CAAYC,OAAZ,KAAwB,KAA5B,EAAmC;AAC/B;AACAV,MAAAA,iBAAiB;AACpB,KARmB,CAUpB;;;AACA,WAAOc,OAAO,CAACL,EAAD,CAAd,CAXoB,CAapB;;AACAxB,IAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAee,OAAf,CAAb,CAAH,CAdoB,CAgBpB;;AACAzB,IAAAA,UAAU,CAACyB,OAAD,CAAV;AACH,GApGyB,CAsG1B;;;AACA,WAASC,WAAT,CAAqBN,EAArB,EAAyBJ,IAAzB,EAA+B;AAC3B,QAAIS,OAAO,GAAG1B,SAAd;AACA0B,IAAAA,OAAO,CAACL,EAAD,CAAP,CAAYJ,IAAZ,GAAmBA,IAAnB,CAF2B,CAI3B;;AACApB,IAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAee,OAAf,CAAb,CAAH,CAL2B,CAO3B;;AACAzB,IAAAA,UAAU,CAACyB,OAAD,CAAV;AACH;;AAED,WAASE,UAAT,CAAoBP,EAApB,EAAwB;AACpB,UAAMQ,WAAW,GAAG7B,SAAS,CAAC8B,GAAV,CAAcC,IAAI,IAAI;AACtC,UAAIA,IAAI,CAACV,EAAL,KAAYA,EAAhB,EAAoB;AAChBU,QAAAA,IAAI,CAACT,OAAL,GAAe,CAACS,IAAI,CAACT,OAArB;AACH;;AACD,aAAOS,IAAP;AACH,KALmB,CAApB,CADoB,CAQpB;;AACAlC,IAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAekB,WAAf,CAAb,CAAH,CAToB,CAWpB;;AACA5B,IAAAA,UAAU,CAAC4B,WAAD,CAAV;AACH,GA/HyB,CAiI1B;;;AACA,WAASG,cAAT,GAA0B;AAEtB;AACAlC,IAAAA,MAAM,CAAC,UAAD,CAAN,CAHsB,CAKtB;;AACAG,IAAAA,UAAU,CAAC,EAAD,CAAV;AAEAJ,IAAAA,GAAG,CAAC,aAAD,EAAgBa,IAAI,CAACC,SAAL,CAAe,CAAf,CAAhB,CAAH;AAEAR,IAAAA,cAAc,CAAC,CAAD,CAAd;AACH;;AAID,SAAO;AACHH,IAAAA,SADG;AACQgB,IAAAA,OADR;AACiBY,IAAAA,UADjB;AAC6BI,IAAAA,cAD7B;AAC6C9B,IAAAA,WAD7C;AAC0DC,IAAAA,cAD1D;AAC0ES,IAAAA,iBAD1E;AAC6FJ,IAAAA,cAD7F;AAC6GiB,IAAAA,UAD7G;AACyHE,IAAAA;AADzH,GAAP;AAIH","sourcesContent":["import { useStorage } from '@capacitor-community/react-hooks/storage';\nimport { useEffect, useState } from 'react';\n\n\n\nexport function useToDoList() {\n\n    // import des fonctions de stockage local\n    const { get, set, remove } = useStorage();\n\n    // déclaration de la liste d'items\n    let listStocked = [];\n    let [listItems, updateList] = useState(listStocked);\n\n    // compteur tâches à faire\n    let [counterTodo, setCounterTodo] = useState(0);\n\n    // fonction pour initialiser le compteur d'items non cochés et synchroniser les données stockées en local\n    function getCounterTodo() {\n        get('counterTodo').then((number) => {\n            setCounterTodo(parseInt(number))\n        })\n    }\n\n    // hook pour utiliser la fonction une seule fois lors de l'affichage de la page\n    useEffect(() => {\n        getCounterTodo()\n    }, [])\n\n    // fonction pour ajouter 1 au compteur\n    function addCounterTodo() {\n        let count = counterTodo\n        count = count + 1\n        setCounterTodo(count)\n        set('counterTodo', JSON.stringify(count))\n    }\n\n    // fonction pour enelever 1 au compteur\n    function removeCounterTodo() {\n        let count = counterTodo\n        count = count - 1\n        setCounterTodo(count)\n        set('counterTodo', JSON.stringify(count))\n    }\n\n    // fonction pour initialiser la liste stockées en local\n    function getStockedList() {\n        get('listTodo').then((listJson) => {\n            if (listJson != null) {\n                listStocked = JSON.parse(listJson);\n\n                updateList(listStocked)\n            }\n        })\n    }\n\n    // appeler la fonction une seule fois pour initialiser les items stockés en local\n    useEffect(() => {\n        getStockedList()\n    }, [])\n\n    // fonction pour ajouter des items à la liste\n    function addItem(text) {\n\n        // on prépare l'id pour le nouvel objet en prenant le dernier id du tableau actuel et on retire 1 pour débuter à la bonne valeur \n        let lengthList = listItems.length - 1\n\n        const newItem = {\n            id: lengthList + 1,\n            text: text,\n            checked: false\n        }\n\n        // on stocke le nouveau tableau avec le nouvel item dans une variable pour l'utiliser dans la fonction update après\n        const newTable = listItems.concat([newItem])\n\n        // on ajoute 1 au compteur lors de la création d'une tâche\n        addCounterTodo()\n\n        // on ajoute le nouveau tableau au sotckage en local\n        set('listTodo', JSON.stringify(newTable))\n\n        // on update la liste en mémoire\n        updateList(newTable)\n    }\n\n    // fonction pour retirer manuellement une tâche\n    function removeItem(id) {\n        // on copie la liste afin de pouvoir la manipuler\n        let newList = listItems\n\n        // on vérifie si l'item est coché ou non\n        if (newList[id].checked === false) {\n            // on enlève 1 au compteur\n            removeCounterTodo();\n        }\n\n        // on supprime l'item voulu dans la nouvelle liste\n        delete newList[id]\n\n        // on ajoute les nouvelles valeurs dans le tableau stocké en local\n        set('listTodo', JSON.stringify(newList))\n\n        // on update les nouvelles valeurs en mémoire\n        updateList(newList)\n    }\n\n    // fonction pour modifier le contenu d'un ite\n    function modifieItem(id, text) {\n        let newList = listItems\n        newList[id].text = text\n\n        // on ajoute les nouvelles valeurs dans le tableau stocké en local\n        set('listTodo', JSON.stringify(newList))\n\n        // on update les nouvelles valeurs en mémoire\n        updateList(newList)\n    }\n\n    function toggleItem(id) {\n        const updatedList = listItems.map(item => {\n            if (item.id === id) {\n                item.checked = !item.checked\n            }\n            return item\n        })\n\n        // on ajoute les nouvelles valeurs dans le tableau stocké en local\n        set('listTodo', JSON.stringify(updatedList))\n\n        // on update les nouvelles valeurs en mémoire\n        updateList(updatedList)\n    }\n\n    // fonction pour retirer tous les items de la liste\n    function removeAllItems() {\n\n        // on enlève la liste stockée en local\n        remove('listTodo');\n\n        // on vide la liste stockée en mémoire\n        updateList([]);\n\n        set('counterTodo', JSON.stringify(0));\n\n        setCounterTodo(0);\n    }\n\n\n\n    return {\n        listItems, addItem, toggleItem, removeAllItems, counterTodo, setCounterTodo, removeCounterTodo, addCounterTodo, removeItem, modifieItem\n    }\n\n}"]},"metadata":{},"sourceType":"module"}