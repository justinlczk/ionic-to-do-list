{"ast":null,"code":"import { useCallback } from \"react\";\n//import { IonInput } from '@ionic/react';\nimport { useStorage, useStorageItem } from '@capacitor-community/react-hooks/storage'; //const { Storage } = Plugins;\n\nconst TODO_STORAGE = \"todos\";\nconst tableauToDo = [];\nexport function useToDoList() {\n  const {\n    get,\n    set,\n    remove,\n    getKeys,\n    clear\n  } = useStorage();\n  const [name, setName] = useStorageItem('name', 'Maximum'); // Example:\n\n  const updateName = useCallback(n => {\n    setName(n);\n  }, [setName]); //Exemple de set\n  //set('name', 'Justin')\n  //console.log(get('name'))\n\n  const createItem = itemValue => {\n    console.log('Le texte envoyé :', itemValue);\n    tableauToDo.push(itemValue);\n    console.log(tableauToDo); //Ne prends que la dernière entrée en compte\n    //tableauToDo.map((value, index) => set('todos', JSON.stringify({ id: index, name: value})))\n    //console.log(get('todos'))\n    //Prends en compte plusieurs entrées mais écrase toujours les données précédentes\n\n    set('todosSet', JSON.stringify(tableauToDo));\n    console.log(get('todosSet'));\n    const returnList = get('todoKepp').then(valueToDo => {\n      //console.log('ici cest la bonne', valueToDo);\n      if (valueToDo != null) {\n        const valueToreturn = JSON.parse(valueToDo);\n        set('todoKepp', JSON.stringify(valueToreturn.concat(tableauToDo)));\n        console.log('Ici mtn', get('todoKepp'));\n      } else {\n        set('todoKepp', JSON.stringify(tableauToDo));\n      }\n    }); //set('todoKepp', JSON.stringify(tableauToDo))\n\n    remove('');\n  };\n\n  return {\n    createItem,\n    tableauToDo\n  };\n}","map":{"version":3,"sources":["/Users/justinluczak/Documents/COURS CNAM 2EME ANNEE/webmobile/Exercice todolist/todolist/src/hooks/useToDoList.ts"],"names":["useCallback","useStorage","useStorageItem","TODO_STORAGE","tableauToDo","useToDoList","get","set","remove","getKeys","clear","name","setName","updateName","n","createItem","itemValue","console","log","push","JSON","stringify","returnList","then","valueToDo","valueToreturn","parse","concat"],"mappings":"AAAA,SAA8BA,WAA9B,QAAiD,OAAjD;AAGA;AACA,SAASC,UAAT,EAAqBC,cAArB,QAA8D,0CAA9D,C,CAEA;;AAIA,MAAMC,YAAY,GAAG,OAArB;AACA,MAAMC,WAAqB,GAAG,EAA9B;AAGA,OAAO,SAASC,WAAT,GAAuB;AAE1B,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA,MAAZ;AAAoBC,IAAAA,OAApB;AAA6BC,IAAAA;AAA7B,MAAuCT,UAAU,EAAvD;AAGA,QAAM,CAACU,IAAD,EAAOC,OAAP,IAAkBV,cAAc,CAAC,MAAD,EAAS,SAAT,CAAtC,CAL0B,CAO1B;;AACA,QAAMW,UAAU,GAAGb,WAAW,CAAEc,CAAD,IAAO;AAClCF,IAAAA,OAAO,CAACE,CAAD,CAAP;AACH,GAF6B,EAE3B,CAACF,OAAD,CAF2B,CAA9B,CAR0B,CAa1B;AACA;AACA;;AAEA,QAAMG,UAAU,GAAIC,SAAD,IAAuB;AACtCC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,SAAjC;AACAZ,IAAAA,WAAW,CAACe,IAAZ,CAAiBH,SAAjB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYd,WAAZ,EAHsC,CAKtC;AACA;AACA;AAIA;;AACAG,IAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAejB,WAAf,CAAb,CAAH;AAEAa,IAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAG,CAAC,UAAD,CAAf;AAMA,UAAMgB,UAAU,GAAGhB,GAAG,CAAC,UAAD,CAAH,CAAgBiB,IAAhB,CAAsBC,SAAD,IAAe;AACnD;AAEA,UAAIA,SAAS,IAAI,IAAjB,EAAuB;AACnB,cAAMC,aAAa,GAAGL,IAAI,CAACM,KAAL,CAAWF,SAAX,CAAtB;AACAjB,QAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAeI,aAAa,CAACE,MAAd,CAAqBvB,WAArB,CAAf,CAAb,CAAH;AACAa,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBZ,GAAG,CAAC,UAAD,CAA1B;AACH,OAJD,MAIO;AACHC,QAAAA,GAAG,CAAC,UAAD,EAAaa,IAAI,CAACC,SAAL,CAAejB,WAAf,CAAb,CAAH;AACH;AAEJ,KAXkB,CAAnB,CApBsC,CAqCtC;;AACAI,IAAAA,MAAM,CAAC,EAAD,CAAN;AAEH,GAxCD;;AA+CA,SAAO;AACHO,IAAAA,UADG;AACSX,IAAAA;AADT,GAAP;AAIH","sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nimport { isPlatform } from '@ionic/react';\nimport { Plugins } from '@capacitor/core';\n//import { IonInput } from '@ionic/react';\nimport { useStorage, useStorageItem, availableFeatures } from '@capacitor-community/react-hooks/storage';\n\n//const { Storage } = Plugins;\n\n\n\nconst TODO_STORAGE = \"todos\";\nconst tableauToDo: string[] = [];\n\n\nexport function useToDoList() {\n\n    const { get, set, remove, getKeys, clear } = useStorage();\n    \n\n    const [name, setName] = useStorageItem('name', 'Maximum');\n\n    // Example:\n    const updateName = useCallback((n) => {\n        setName(n);\n    }, [setName]);\n\n\n    //Exemple de set\n    //set('name', 'Justin')\n    //console.log(get('name'))\n\n    const createItem = (itemValue: string) => {\n        console.log('Le texte envoyé :', itemValue)\n        tableauToDo.push(itemValue)\n        console.log(tableauToDo)\n\n        //Ne prends que la dernière entrée en compte\n        //tableauToDo.map((value, index) => set('todos', JSON.stringify({ id: index, name: value})))\n        //console.log(get('todos'))\n\n\n\n        //Prends en compte plusieurs entrées mais écrase toujours les données précédentes\n        set('todosSet', JSON.stringify(tableauToDo));\n\n        console.log(get('todosSet'))\n\n\n\n\n\n        const returnList = get('todoKepp').then((valueToDo) => {\n            //console.log('ici cest la bonne', valueToDo);\n\n            if (valueToDo != null) {\n                const valueToreturn = JSON.parse(valueToDo)\n                set('todoKepp', JSON.stringify(valueToreturn.concat(tableauToDo)))\n                console.log('Ici mtn', get('todoKepp'))\n            } else {\n                set('todoKepp', JSON.stringify(tableauToDo))\n            }\n\n        })\n\n\n\n        \n\n        //set('todoKepp', JSON.stringify(tableauToDo))\n        remove('')\n\n    }\n\n\n\n\n\n\n    return {\n        createItem, tableauToDo\n    }\n\n}\n\n\nexport interface ToDoList {\n    filepath: string;\n    webviewPath?: string;\n}"]},"metadata":{},"sourceType":"module"}